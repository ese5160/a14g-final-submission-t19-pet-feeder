[![Review Assignment Due Date](https://classroom.github.com/assets/deadline-readme-button-24ddc0f5d75046c5622901739e7c5dd533143b0c8e959d652212380cedb1ea36.svg)](https://classroom.github.com/a/kzkUPShx)
# a14g-final-submission

    * Team Number: 19
    * Team Name: Pet Feeder
    * Team Members: Chenzhi Lu & Shibo Wang
    * Github Repository URL: https://github.com/ese5160/a14g-final-submission-t19-pet-feeder
    * Description of test hardware: Dell XPS13, Windows 11

## 1. Video Presentation
The video link:

## 2. Project Summary

### Device Description

1. SG90 Servo Motor  
The servo motor is used to turn on and off the food storage. It is much more complicated and difficult than our expected when we implemented the drivers by ourselves. Since the rotation of the servo angle is controlled by the PWM signals which are generated by the TCC/TC timer counter, but not all MCU pins are attached with this function. Fortunately, the pin PA11 we assigned has the TCC1 counter. After the successful generation of the PWM signal, the next problem is how to verify the duty cycle after the system initialization. Once we changed the `compare_match` in the `tcc_configure` process, the whole system will get stuck and cashed. We solved it by using the `tcc_set_compare_value` function, where we can change the PWM length by calculating the required timer counter ticks based on the datasheet parameters.

2. Load Cell with NAU7802 ADC
The load cell is used to measure the weight data and the ADC is used to converter the raw data to the real value, which is communicated with the MCU through the I2C protocol. The problem of this device is that there are numerous registers in the datasheet, which is necessary to find out how assign them correctly. This is the essential part of the ADC chip working because the wrong initialization of the registers will lead to the unsuccessful value read. After figuring out the correct presetting of the ADC, the calibration and handling of raw data is also a huge problem. In the end, though the real weight converting is still not so accurate, but we at least can measure the load cell value with the correct tendency.

3. ST7735 LCD TFT Screen
The LCD screen is used to display the weight data measured from the load cell, which is connected to the SAMW25 chip by SPI communication. Although we have learned the basic initialization and LCD function in ESE5190 class last semester, we still met unexpected problems in SPI configuration. The SCK and MOSI pins must be under the same SERCOM, and needed to be defined with the correspond `CONF_MASTER_PINMUX_PAD`.

## 3. Hardware & Software Requirements

## 4. Project Photos & Screenshots
